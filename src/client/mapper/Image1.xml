<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">   
  
<mapper namespace="client.entity.Image1">
  	
	<resultMap type="client.entity.Image1" id="result">
		<id property="id" column="id"/>
		<result property="modelId" column="model_id"/>
		<result property="name" column="name"/>
		<result property="sort" column="sort"/>
		<result property="url" column="url"/>
	</resultMap>
  	
	<sql id="columns">
		ID, MODEL_ID, NAME, SORT, URL
	</sql>
	
	<select id="get" resultMap="result">
		select <include refid="columns"/> from tb_image where id = #{id}
	</select>
	
	<select id="getByPidAndMaxSort" resultMap="result">
		select <include refid="columns"/> from tb_image t where t.sort = (select max(t.sort) from tb_image t where t.model_id = #{modelId}) and t.model_id = #{modelId}
	</select>

</mapper>  
